<ion-header>
  <ion-toolbar color='primary'>
    <!-- Boton principal del menu -->
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <!-- Botonos auxiliares -->
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>

    <ion-title>{{titulo}}</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="form" novalidate>
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-item>
            <div>
              <ion-label>Formula</ion-label>
              <textarea formControlName="formula" rows="12" #myTextArea (click)="getCaretPos(myTextArea)"
                (keyup)="getCaretPos(myTextArea)" cols="72">Sample Text Here, Place cursor here</textarea>
            </div>

            <!--   <ion-label>Formula</ion-label>
            <ion-textarea #myTextArea formControlName="formula" rows="12" cols="1"
              placeholder="Ingrese aqui la formula..." (click)="getCaretPos(myTextArea)"
              (keyup)="getCaretPos(myTextArea)">
            </ion-textarea>
 -->
          </ion-item>
          <ion-item>
            <ion-label>Formula-Valores</ion-label>
            <ion-textarea formControlName="formulaValue" rows="6" cols="1">
            </ion-textarea>
          </ion-item>
          <ion-item *ngIf="false">
            <ion-label position="fixed">Id</ion-label>
            <ion-input type="number" formControlName="id"></ion-input>
          </ion-item>
          <ion-item *ngIf="false">
            <ion-label position="floating">Variable</ion-label>
            <ion-input type="text" formControlName="appVariableId"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Variable:</ion-label>
            <ion-input type="text" formControlName="code" placeholder="Buscar variable..." readonly>
            </ion-input>
            <ion-button (click)="onBuscarVariable()">
              <ion-icon name="search-outline"></ion-icon>
            </ion-button>
          </ion-item>
          <ion-item *ngIf="false">
            <ion-label position="floating">Descripcion</ion-label>
            <ion-input type="text" formControlName="description"></ion-input>
          </ion-item>


          <ion-item>
            <ion-label>Valor:</ion-label>

            <ion-input type="number" formControlName="value"></ion-input>
          </ion-item>


          <ion-item>
            <ion-label>Orden de Calculo</ion-label>
            <ion-input type="number" formControlName="orderCalculate"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Sumar?</ion-label>
            <ion-checkbox formControlName="sumValue"></ion-checkbox>
          </ion-item>



          <!-- Grabar -->
          <ion-button [disabled]="(!form.valid)" *ngIf="flagInsert" type="button" shape="round" color="success"
            float-right (click)="insert()">
            <ion-icon name="checkmark-circle" style="color:black;font-weight:900;font-size: 2em;"></ion-icon>
            Crear
          </ion-button>

          <ion-button [disabled]="(!form.valid)" *ngIf="flagUpdate" type="button" shape="round" color="success"
            float-right (click)="Update()">
            <!-- <ion-icon name="checkmark-circle" style="color:black;font-weight:900;font-size: 2em;"></ion-icon> -->
            Guardar
          </ion-button>



        </ion-col>
        <ion-col>

          <ion-list>

            <ion-searchbar (ionChange)="onChangeSearchTextVariables($event)" placeholder="Variable" debounce=800>

            </ion-searchbar>

            <!-- Listado de variables  -->

            <ion-item-sliding *ngFor="let variable of appVariablesGetDto">

              <ion-item (click)="selectVariable(variable)">
                <ion-label>

                  <p> Code: {{ variable.code }} </p>
                  <p> Descripci√≥n: {{ variable.description }} </p>

                </ion-label>
              </ion-item>




            </ion-item-sliding>
          </ion-list>



        </ion-col>
      </ion-row>

    </ion-grid>
    <!-- Id Ingrediente-->






  </form>
</ion-content>